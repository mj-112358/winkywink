# WINK Retail Analytics Platform - Environment Configuration
# Copy this file to .env and configure your values

# =============================================================================
# STORE CONFIGURATION
# =============================================================================
STORE_ID=your_store_id
STORE_NAME="Your Store Name"

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================
# PostgreSQL password for production deployment
POSTGRES_PASSWORD=your_secure_database_password_here

# SQLite database path (for local development)
DB_PATH=wink_store.db

# Optional: PostgreSQL connection URL for production
# DATABASE_URL=postgresql://wink_user:password@postgres:5432/wink_analytics

# =============================================================================
# REDIS CONFIGURATION
# =============================================================================
# Redis URL for real-time tracking and queue management
REDIS_URL=redis://redis:6379

# =============================================================================
# AI/ML CONFIGURATION
# =============================================================================
# OpenAI API key for insights generation (required for AI features)
OPENAI_API_KEY=sk-your-openai-api-key-here

# Hardware configuration for person detection
MODEL_DEVICE=cpu  # Options: cpu, cuda (requires NVIDIA GPU)

# =============================================================================
# CAMERA PROCESSING CONFIGURATION
# =============================================================================
# Video processing settings
FRAME_RATE=12            # Frames per second to process
DETECTION_INTERVAL=3     # Process every Nth frame (higher = better performance)

# Person detection thresholds
DETECTION_CONFIDENCE=0.5    # Minimum confidence for person detection (0.0-1.0)
MIN_DETECTION_AREA=1000     # Minimum pixel area for valid detection

# Tracking configuration
TRACK_TIMEOUT=10            # Seconds before losing track of a person
MAX_TRACK_DISTANCE=75       # Maximum pixel distance for track association

# =============================================================================
# MONITORING AND ALERTING
# =============================================================================
# Grafana admin password
GRAFANA_PASSWORD=your_grafana_admin_password

# Prometheus configuration
PROMETHEUS_RETENTION=200h   # How long to keep metrics data

# =============================================================================
# SSL/DOMAIN CONFIGURATION
# =============================================================================
# Email for Let's Encrypt SSL certificates
LETSENCRYPT_EMAIL=admin@winkai.in

# Domain configuration (already set for winkai.in)
DOMAIN=winkai.in
API_DOMAIN=api.winkai.in
DASHBOARD_DOMAIN=dashboard.winkai.in
METRICS_DOMAIN=metrics.winkai.in

# =============================================================================
# ASSETS AND STORAGE
# =============================================================================
# Directory for storing assets (screenshots, models, etc.)
ASSETS_DIR=assets

# Directory for ML models
MODELS_DIR=models

# =============================================================================
# PERFORMANCE TUNING
# =============================================================================
# Database connection pool settings
DB_POOL_SIZE=20
DB_MAX_OVERFLOW=0

# API rate limiting
RATE_LIMIT_REQUESTS=1000    # Requests per minute per IP
RATE_LIMIT_WINDOW=60        # Rate limit window in seconds

# Memory limits for Docker containers (optional)
BACKEND_MEMORY_LIMIT=2g
PROCESSOR_MEMORY_LIMIT=4g
REDIS_MEMORY_LIMIT=1g

# =============================================================================
# DEVELOPMENT/DEBUG SETTINGS
# =============================================================================
# Set to true for development mode
DEBUG=false

# Log level (DEBUG, INFO, WARNING, ERROR)
LOG_LEVEL=INFO

# Enable detailed API logging
API_DEBUG=false

# =============================================================================
# NOTIFICATION SETTINGS (OPTIONAL)
# =============================================================================
# Email notifications for alerts
SMTP_SERVER=smtp.gmail.com
SMTP_PORT=587
SMTP_USERNAME=your-email@gmail.com
SMTP_PASSWORD=your-email-password
ALERT_EMAIL=admin@winkai.in

# Slack webhook for alerts (optional)
SLACK_WEBHOOK_URL=https://hooks.slack.com/services/YOUR/SLACK/WEBHOOK

# =============================================================================
# BACKUP CONFIGURATION (OPTIONAL)
# =============================================================================
# S3 configuration for backups
AWS_ACCESS_KEY_ID=your-aws-key
AWS_SECRET_ACCESS_KEY=your-aws-secret
S3_BACKUP_BUCKET=wink-backups
S3_REGION=us-east-1

# Backup schedule (cron format)
BACKUP_SCHEDULE="0 2 * * *"  # Daily at 2 AM

# =============================================================================
# SECURITY SETTINGS
# =============================================================================
# JWT secret for API authentication (if implementing auth)
JWT_SECRET=your-jwt-secret-key-here

# API key for external integrations (optional)
API_KEY=your-api-key-for-external-access

# Allowed origins for CORS (comma-separated)
CORS_ORIGINS=https://winkai.in,https://www.winkai.in,https://dashboard.winkai.in

# =============================================================================
# TIMEZONE CONFIGURATION
# =============================================================================
# Timezone for the store (affects analytics calculations)
TIMEZONE=Asia/Kolkata

# Date format for analytics (ISO format recommended)
DATE_FORMAT=%Y-%m-%d

# =============================================================================
# ADVANCED ANALYTICS SETTINGS
# =============================================================================
# Spike detection sensitivity (1.0-3.0, lower = more sensitive)
SPIKE_SENSITIVITY=2.0

# Baseline days for anomaly detection
BASELINE_DAYS=14

# Minimum data points for trend analysis
MIN_TREND_POINTS=7

# Conversion rate calculation method
CONVERSION_METHOD=interactions_per_visitor  # or dwell_time_based

# =============================================================================
# EXAMPLE RTSP CAMERA URLS
# =============================================================================
# Add your camera URLs here for reference
# CAMERA_1_RTSP=rtsp://username:password@192.168.1.100:554/stream1
# CAMERA_2_RTSP=rtsp://username:password@192.168.1.101:554/stream1
# CAMERA_3_RTSP=rtsp://admin:password123@store-cam-entrance.local:554/h264

# =============================================================================
# NOTES
# =============================================================================
# 1. Never commit the actual .env file to version control
# 2. Use strong passwords for all services
# 3. Keep OpenAI API keys secure and monitor usage
# 4. Regularly rotate passwords and API keys
# 5. Monitor resource usage and adjust limits as needed
# 6. Test camera URLs before adding them to the system
# 7. Ensure your server has sufficient resources for your configuration